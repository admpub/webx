$(function(){var n=document.getElementById("qr-reader-results"),t="",r=null;function o(){if(!r)return;clearTimeout(r);r=null}function e(e){if(!e||t===e)return;t=e;o();r=setTimeout(function(){t=""},5e3);if(!String(e).startsWith("coscms:")){n.innerText=e;$("#btn-copy-qrcode.hidden").removeClass("hidden");App.message({text:App.t("识别成功"),type:"success"});return}$.post(FRONTEND_URL+"/user/qrcode/scan",{data:e},function(e){if(e.Code!=1){n.innerText=e.Info;$("#btn-copy-qrcode:not(.hidden)").addClass("hidden");t="";o();return App.message({text:e.Info,type:"error"})}n.innerText=e.Info;$("#btn-copy-qrcode:not(.hidden)").addClass("hidden");return App.message({text:e.Info,type:"success"})},"json").error(function(){t="";o()})}function s(e){}function d(e,n){var t=Math.min(e,n);var r=Math.floor(t*.7);r=Math.min(250,r);return{width:r,height:r}}var c=new Html5QrcodeScanner("qr-reader",{fps:10,qrbox:d,rememberLastUsedCamera:true});c.render(e,s);attachCopy("#btn-copy-qrcode")});